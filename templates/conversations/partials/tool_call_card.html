{% load conversation_tags %}
<div class="bg-white border border-gray-300 rounded-lg p-3 mt-2">
    <div class="flex items-center justify-between mb-2">
        <span class="text-xs font-semibold text-gray-700 bg-gray-100 px-2 py-0.5 rounded">
            {{ tc.tool_name }}
        </span>
        <span class="text-xs {% if tc.status_code == 200 %}text-green-600{% else %}text-red-600{% endif %}">
            {% if tc.status_code == 200 %}Success (200){% elif tc.status_code %}Error ({{ tc.status_code }}){% endif %}
        </span>
    </div>

    <div class="text-xs space-y-1">
        {% for key, value in tc.display_args.items %}
        <div class="flex">
            <span class="font-medium text-gray-600 w-32">{{ key }}:</span>
            <span class="text-gray-900">{{ value }}</span>
        </div>
        {% endfor %}
    </div>

    {% if tc.response_body %}
    <div class="mt-2 text-xs text-gray-500">
        <span class="font-medium">Result:</span>
        {% for key, value in tc.response_body.items %}
        {{ key }}: {{ value }}{% if not forloop.last %}, {% endif %}
        {% endfor %}
    </div>
    {% endif %}

    {% if tc.is_edited %}
    <div class="mt-1 text-xs text-green-600">Edited</div>
    {% endif %}

    {% if conversation.status in 'assigned,in_progress' %}
    <div class="mt-2 flex items-center space-x-2">
        <button hx-get="{% url 'tool_call_edit' conversation.pk tc.pk %}"
                hx-target="#toolcall-{{ tc.pk }}"
                hx-swap="innerHTML"
                class="text-xs text-indigo-600 hover:text-indigo-800">Edit Tool Call</button>
        {% if not tc.is_edited %}
        <span class="text-xs text-gray-400">Looks Good &#10003;</span>
        {% endif %}
    </div>
    {% endif %}
</div>
